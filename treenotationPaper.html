<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <title>Tree Notation: an antifragile program notation</title>
 <script>/* This HTML was generated by 📜 Scroll v136.8.0. https://scroll.pub */</script>
 <style>@media print {.doNotPrint {display: none !important;}}</style>
 <link rel="canonical" href="https://breckyunits.com/treenotationPaper.html">
 <meta name="viewport" content="width=device-width,initial-scale=1">
 <meta name="description" content="">
 <meta name="generator" content="Scroll v136.8.0">
 <meta property="og:title" content="Tree Notation: an antifragile program notation">
 <meta property="og:description" content="">
 <meta property="og:image" content="https://breckyunits.com/treenotation.png">
 
 <link rel="source" type="application/git" title="Source Code Repository" href="https://github.com/breck7/breckyunits.com">
 <link rel="alternate" type="application/rss+xml" title="Tree Notation: an antifragile program notation" href="feed.xml">
 <meta name="twitter:card" content="summary_large_image">
</head>
<body>
<link rel="stylesheet" type="text/css" href="gazette.css"></link>

<style>.abstractIconButtonParser {position:absolute;top:0.25rem; }.abstractIconButtonParser svg {fill: rgba(204,204,204,.8);width:1.875rem;height:1.875rem; padding: 0 7px;} .abstractIconButtonParser:hover svg{fill: #333;}</style><a href="index.html" class="doNotPrint abstractIconButtonParser" style="left:2rem;"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.7166 3.79541C12.2835 3.49716 11.7165 3.49716 11.2834 3.79541L4.14336 8.7121C3.81027 8.94146 3.60747 9.31108 3.59247 9.70797C3.54064 11.0799 3.4857 13.4824 3.63658 15.1877C3.7504 16.4742 4.05336 18.1747 4.29944 19.4256C4.41371 20.0066 4.91937 20.4284 5.52037 20.4284H8.84433C8.98594 20.4284 9.10074 20.3111 9.10074 20.1665V15.9754C9.10074 14.9627 9.90433 14.1417 10.8956 14.1417H13.4091C14.4004 14.1417 15.204 14.9627 15.204 15.9754V20.1665C15.204 20.3111 15.3188 20.4284 15.4604 20.4284H18.4796C19.0806 20.4284 19.5863 20.0066 19.7006 19.4256C19.9466 18.1747 20.2496 16.4742 20.3634 15.1877C20.5143 13.4824 20.4594 11.0799 20.4075 9.70797C20.3925 9.31108 20.1897 8.94146 19.8566 8.7121L12.7166 3.79541ZM10.4235 2.49217C11.3764 1.83602 12.6236 1.83602 13.5765 2.49217L20.7165 7.40886C21.4457 7.91098 21.9104 8.73651 21.9448 9.64736C21.9966 11.0178 22.0564 13.5119 21.8956 15.3292C21.7738 16.7067 21.4561 18.4786 21.2089 19.7353C20.9461 21.0711 19.7924 22.0001 18.4796 22.0001H15.4604C14.4691 22.0001 13.6655 21.1791 13.6655 20.1665V15.9754C13.6655 15.8307 13.5507 15.7134 13.4091 15.7134H10.8956C10.754 15.7134 10.6392 15.8307 10.6392 15.9754V20.1665C10.6392 21.1791 9.83561 22.0001 8.84433 22.0001H5.52037C4.20761 22.0001 3.05389 21.0711 2.79113 19.7353C2.54392 18.4786 2.22624 16.7067 2.10437 15.3292C1.94358 13.5119 2.00338 11.0178 2.05515 9.64736C2.08957 8.73652 2.55427 7.91098 3.28346 7.40886L10.4235 2.49217Z"/></svg></a>
<style>a.keyboardNav {display:block;position:absolute;top:0.25rem; color: rgba(204,204,204,.8); font-size: 1.875rem; line-height: 1.7rem;}a.keyboardNav:hover{color: #333;text-decoration: none;}</style><a class="keyboardNav doNotPrint" style="left:.5rem;" href="ohayo.html">&lt;</a><a class="keyboardNav doNotPrint" style="right:.5rem;" href="ohayo.html">&gt;</a>
<style>.abstractIconButtonParser {position:absolute;top:0.25rem; }.abstractIconButtonParser svg {fill: rgba(204,204,204,.8);width:1.875rem;height:1.875rem; padding: 0 7px;} .abstractIconButtonParser:hover svg{fill: #333;}</style><a href="https://github.com/breck7/breckyunits.com/blob/main/treenotationPaper.scroll" class="doNotPrint abstractIconButtonParser" style="right:2rem;"><svg xmlns="http://www.w3.org/2000/svg" width="92pt" height="92pt" viewBox="0 0 92 92"><path d="M90.156 41.965 50.036 1.848a5.913 5.913 0 0 0-8.368 0l-8.332 8.332 10.566 10.566a7.03 7.03 0 0 1 7.23 1.684 7.043 7.043 0 0 1 1.673 7.277l10.183 10.184a7.026 7.026 0 0 1 7.278 1.672 7.04 7.04 0 0 1 0 9.957 7.045 7.045 0 0 1-9.961 0 7.038 7.038 0 0 1-1.532-7.66l-9.5-9.497V59.36a7.04 7.04 0 0 1 1.86 11.29 7.04 7.04 0 0 1-9.957 0 7.04 7.04 0 0 1 0-9.958 7.034 7.034 0 0 1 2.308-1.539V33.926a7.001 7.001 0 0 1-2.308-1.535 7.049 7.049 0 0 1-1.516-7.7L29.242 14.273 1.734 41.777a5.918 5.918 0 0 0 0 8.371L41.855 90.27a5.92 5.92 0 0 0 8.368 0l39.933-39.934a5.925 5.925 0 0 0 0-8.371"/></svg></a>
<style>img {border: 2px solid #e9e9e9; border-radius: 5px;}</style>
<div class="scrollSection"><h1 class="scrollTitle"><a href="treenotationPaper.html">Tree Notation: an antifragile program notation</a></h1>
</div>
<p class="scrollByLine">by <a href="https://breckyunits.com">Breck Yunits</a></p>
<div style="text-align: center;" class="scrollDateline">June 21, 2017</div>
<div class="scrollColumns" style="column-width:65ch;column-count:1;max-width:65ch;">
<div class="dinkus"><span>*</span></div>
<p class="scrollParagraph">This paper presents Tree Notation, a new simple, universal syntax. Language designers can invent new programming languages, called Tree Languages, on top of Tree Notation. Tree Languages have a number of advantages over traditional programming languages.</p>
<p class="scrollParagraph">We include a Visual Abstract to succinctly display the problem and discovery. Then we describe the problem--the BNF to abstract syntax tree (AST) parse step--and introduce the novel solution we discovered: a new family of 2D programming languages that are written directly as geometric trees.</p>
<div class="dinkus"><span>*</span></div>
<figure class="scrollCaptionedFigure" style="width:752px; margin: auto;"><a href="treenotation.png" target="_blank"  ><img src="treenotation.png" width="752" height="523" loading="lazy"></a><figcaption><p class="scrollParagraph">Figure 1. This Visual Abstract explains the core idea of the paper. This diagram is also the output of a <a href="diagram.flow">program</a> written in a new Tree Language called Flow.</p></figcaption></figure>
<div class="scrollSection"><h1 class="scrollParagraph">The Problem</h1>
</div>
<p class="scrollParagraph">Programming is complicated. Our current 1-dimensional languages (1DLs) add to this complexity. To run 1DL code we first strip whitespace, then transform it to an AST and then transform that to executable machine code. These intermediate steps have enabled local minimum gains in developer productivity. But programmers lose time and insight due to discrepancies between 1DL code and ASTs.</p>
<div class="scrollSection"><h1 class="scrollParagraph">The Solution: Tree Notation</h1>
</div>
<p class="scrollParagraph">In this paper and accompanying GitHub ES6 Repo (<a href="https://github.com/breck7/treenotation">GER</a>), we introduce Tree Notation (TN), a new 2D notation. A node in TN maps to an XY point on a 2D plane. You can extend TN to create domain specific languages (DSLs) that don't require a transformation to a discordant AST. These DSLs, called Tree Languages (TLs), are easy to create and can be simple or Turing Complete.</p>
<p class="scrollParagraph">TN encodes one data structure, a <code>TreeNode</code>, with two members: a string called <code>line</code> and an optional array of child TreeNodes called <code>children</code>.</p>
<p class="scrollParagraph">TN defines two special characters, Y Increment (YI) and X Increment (XI). YI is <code> \n</code> and XI is <code> </code>.  XI is a space, not a tab. Many TLs also add a Word Increment (WI) to provide a more succint way of encoding common node types.</p>
<p class="scrollParagraph">A comparison quickly illustrates nearly the entirety of the notation:</p>
<div class="codeWithHeader"><div class="codeHeader">JSON</div><code class="scrollCodeBlock">{
 "title" : "Web Stats",
 "visitors": {
  "mozilla": 802
 }
}</code></div>
<div class="codeWithHeader"><div class="codeHeader">Tree Notation</div><code class="scrollCodeBlock">title Web Stats
visitors
 mozilla 802</code></div>
<div class="scrollSection"><h1 class="scrollParagraph">Useful Properties</h1>
</div>
<div class="scrollSection"><h2 class="scrollParagraph">Simplicity</h2>
<p class="scrollParagraph">As shown in Figure 1, TN simply maps source code to an XY plane which makes reading code locally and globally easy, and TL programs use far fewer source nodes than equivalent 1DL programs. TLs let programmers write much shorter, perfect programs.</p>
</div>
<div class="scrollSection"><h2 class="scrollParagraph">Zero parse errors</h2>
<p class="scrollParagraph">Parse errors do not exist in TN. Every text string is a valid TN program. TLs implement microparsers that parallelize easily and can creatively handle errors.</p>
</div>
<p class="scrollParagraph">With most 1DLs, to get from a blank program to a certain valid program in keystroke increments requires stops at invalid programs. With TN all intermediate steps are valid TN programs.</p>
<p class="scrollParagraph">A user can edit the nodes of a program at runtime with no risk of breaking the TN parsing of the entire program. "Errors", still can exist at the TL level, but TL microparsers can handle errors independently and even correct errors automatically. TLs cut development and debug time.</p>
<div class="scrollSection"><h2 class="scrollParagraph">Semantic diffs</h2>
</div>
<p class="scrollParagraph">1DLs ignore whitespace and so permit programmers and programs to encode the same object to different programs. This often causes merge conflicts for non-semantic changes.</p>
<p class="scrollParagraph">TN does not ignore whitespace and diffs contain only semantic meaning. Just one right way to encode a program.</p>
<div class="scrollSection"><h2 class="scrollParagraph">Easy composition</h2>
</div>
<p class="scrollParagraph">Base notations such as XML<a href="#note2" class="scrollNoteLink" id="noteUsage2"><sup>[2]</sup></a>, JSON<a href="#note3" class="scrollNoteLink" id="noteUsage3"><sup>[3]</sup></a>, and Racket<a href="#note4" class="scrollNoteLink" id="noteUsage4"><sup>[4]</sup></a> can encode multi-lingual programs by complecting language blocks. For example, the JSON program below requires extra nodes to encode Python:</p>
<code class="scrollCodeBlock">{
 "source": [
  "import hn.np as lz\n",
  "print(\"aaronsw pdm ah as mo gb 28-3\")"
  ]
}</code>
<p class="scrollParagraph">With TN, the Python code requires no complecting:</p>
<code class="scrollCodeBlock">source
 import hn.np as lz
 print("aaronsw pdm ah as mo gb 28-3")</code>
<div class="scrollSection"><h1 class="scrollParagraph">Drawbacks</h1>
</div>
<p class="scrollParagraph">TN is new and tooling support rounds to zero.</p>
<p class="scrollParagraph">TN lacks primitive types. Many 1DLs have notations for common types like floats, and parse directly to efficient in-memory structures. TLs make TN useful. The GER demonstrates how useful TLs can be built with just a few lines of code, which is far less code than one needs to implement even a simple 1DL such as JSON<a href="#note5" class="scrollNoteLink" id="noteUsage5"><sup>[5]</sup></a>.</p>
<p class="scrollParagraph">TN is verbose without a TL. A complex node in TN takes multiple lines. Base 1DLs allow multiple nodes per line.</p>
<p class="scrollParagraph">Some developers dislike space-indented notations, some wrongly prefer tabs, and some just have no taste.</p>
<div class="scrollSection"><h1 class="scrollParagraph">Predictions</h1>
</div>
<p class="scrollParagraph"><strong>Prediction 1: no structure will be found that cannot serialize to TN.</strong> Some LISP programmers believe all structures are recursive lists (or perhaps "recursive cons"). We believe in The Tree Conjecture (TTC): <strong>All structures are trees</strong>.</p>
<p class="scrollParagraph">For example, a map could serialize to MapTL:</p>
<code class="scrollCodeBlock">dsl Domain Specific Language
sf San Francisco</code>
<p class="scrollParagraph">Therefore, maps are a type of tree. TTC stands.</p>
<p class="scrollParagraph"><strong>Prediction 2: TLs will be found for every popular 1DL.</strong> Below is some code in a simple TL, JsonTL:</p>
<code class="scrollCodeBlock">o
 s dsl yrt
 n ma 902</code>
<p class="scrollParagraph">TLs will be found for great 1DLs including C, RISC-V, ES6, and Arc. Some TLs have already been found<a href="#note6" class="scrollNoteLink" id="noteUsage6"><sup>[6]</sup></a>, but their common TN DNA has gone unseen. The immediate benefit of creating a TL for an 1DL is that programs can then be written in a TL editor and compiled to that 1DL.</p>
<p class="scrollParagraph"><strong>Prediction 3: Tree Oriented Programming (TOP) will supersede Object Oriented Programming.</strong> A new style of programming, TOP, will arise. TOP programmers will frequently reference 2D views of their program.</p>
<p class="scrollParagraph"><strong>Prediction 4: The simplest 2D text encodings for neural networks will be TLs.</strong> High level TLs will be found to translate machine written programs into understandable trees.</p>
<div class="scrollSection"><h1 class="scrollParagraph">Literature Review</h1>
</div>
<p class="scrollParagraph">Turing Machines with 2D Tapes have been studied and are known to be Turing Complete<a href="#note7" class="scrollNoteLink" id="noteUsage7"><sup>[7]</sup></a>. A few esoteric 2D programming languages are available online<a href="#note8" class="scrollNoteLink" id="noteUsage8"><sup>[8]</sup></a>. At time of publication, 387 programming languages and notations were searched and many thousands of pages of research and code was read but TN was not found.</p>
<p class="scrollParagraph">The closest someone came to discovering TN, and TLs, was perhaps Mark B. Wells, who wrote a brillant paper at Los Alamos, back in 1972 which predicted the discovery and utility of something like TLs<a href="#note1" class="scrollNoteLink" id="noteUsage1"><sup>[1]</sup></a>.</p>
<div class="scrollSection"><h1 class="scrollParagraph">Further Research</h1>
</div>
<p class="scrollParagraph">The GER contains a TN parser, grammar notation, Tree Language compiler-compiler (TLCC), VM, and some TLs.</p>
<p class="scrollParagraph">Future publications might explore the Tree Notation Grammar, TLCC, or machine-written TL programs.</p>
<figure class="scrollCaptionedFigure" style="width:320px; margin: auto;"><a href="tree.jpg" target="_blank"  ><img src="tree.jpg" width="320" height="244" loading="lazy"></a></figure>
<div class="dinkus"><span>⁂</span></div>
<div class="scrollSection"><h1 class="scrollParagraph">References</h1>
</div>
<p  id="note1"class="scrollParagraph"><a class="scrollFootNoteUsageLink" href="#noteUsage1">[1]</a> Wells, Mark B. "A REVIEW OF TWO-DIMENSIONAL PROGRAMMING LANGUAGES*". 1972. <a href="http://sci-hub.cc/10.1145/942576.807009" target="_blank">http://sci-hub.cc/10.1145/942576.807009</a> (visited in 2017).</p>
<p  id="note2"class="scrollParagraph"><a class="scrollFootNoteUsageLink" href="#noteUsage2">[2]</a> Bray, Tim, et al. "Extensible markup language (XML)." World Wide Web Consortium Recommendation REC-xml-19980210. <a href="http://www" target="_blank">http://www</a>. w3. org/TR/1998/REC-xml-19980210 16 (1998): 16.</p>
<p  id="note3"class="scrollParagraph"><a class="scrollFootNoteUsageLink" href="#noteUsage3">[3]</a> Crockford, Douglas. "The application/json media type for javascript object notation (json)." (2006).</p>
<p  id="note4"class="scrollParagraph"><a class="scrollFootNoteUsageLink" href="#noteUsage4">[4]</a> Tobin-Hochstadt, Sam, et al. "Languages as libraries." ACM SIGPLAN Notices. Vol. 46. No. 6. ACM, 2011.</p>
<p  id="note5"class="scrollParagraph"><a class="scrollFootNoteUsageLink" href="#noteUsage5">[5]</a> Ooms, Jeroen. "The jsonlite package: A practical and consistent mapping between json data and r objects." arXiv preprint arXiv:1403.2805 (2014).</p>
<p  id="note6"class="scrollParagraph"><a class="scrollFootNoteUsageLink" href="#noteUsage6">[6]</a> Roughan, Matthew, and Jonathan Tuke. "Unravelling graph-exchange file formats." arXiv preprint arXiv:1503.02781 (2015).</p>
<p  id="note7"class="scrollParagraph"><a class="scrollFootNoteUsageLink" href="#noteUsage7">[7]</a> Toida, Shunichi. "Types of Turing Machines." <a href="http://www.cs.odu.edu/~toida/nerzic/390teched/tm/othertms.html" target="_blank">http://www.cs.odu.edu/~toida/nerzic/390teched/tm/othertms.html</a> (visited in 2017).</p>
<p  id="note8"class="scrollParagraph"><a class="scrollFootNoteUsageLink" href="#noteUsage8">[8]</a> Ender, Martin. "A two-dimensional, hexagonal programming language." <a href="https://github.com/m-ender/hexagony" target="_blank">https://github.com/m-ender/hexagony</a> (visited in 2017).</p>
<link rel="stylesheet" href="katex.min.css">
<script defer src="katex.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => document.querySelectorAll(".scrollKatex").forEach(el =>
 {
  katex.render(el.innerText, el, {
      throwOnError: false
  });
 }
))
</script>

<div class="scrollKatex" id="100"></div>
<div class="scrollKeyboardNav" style="display:none;"><a href="ohayo.html">ohayo.html</a> · treenotationPaper.html · <a href="show-hn-programming-is-now-two-dimensional.html">show-hn-programming-is-now-two-dimensional.html</a><script>document.addEventListener('keydown', function(event) {
  if (document.activeElement !== document.body) return
  if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) return // dont interfere with keyboard back button shortcut
  const getLinks = () => document.getElementsByClassName("scrollKeyboardNav")[0].getElementsByTagName("a")
  if (event.key === "ArrowLeft")
    getLinks()[0].click()
  else if (event.key === "ArrowRight")
    getLinks()[1].click()
 });</script></div>
</div>
<center><p class="scrollParagraph"></p>
<style>.abstractIconButtonParser {position:absolute;top:0.25rem; }.abstractIconButtonParser svg {fill: rgba(204,204,204,.8);width:1.875rem;height:1.875rem; padding: 0 7px;} .abstractIconButtonParser:hover svg{fill: #333;}</style><a href="mailto:breck7@gmail.com" class="doNotPrint abstractIconButtonParser" style="position:relative;"><svg viewBox="3 5 24 20" width="24" height="20" xmlns="http://www.w3.org/2000/svg"><g transform="matrix(1, 0, 0, 1, 0, -289.0625)"><path style="opacity:1;stroke:none;stroke-width:0.49999997;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="M 5 5 C 4.2955948 5 3.6803238 5.3628126 3.3242188 5.9101562 L 14.292969 16.878906 C 14.696939 17.282876 15.303061 17.282876 15.707031 16.878906 L 26.675781 5.9101562 C 26.319676 5.3628126 25.704405 5 25 5 L 5 5 z M 3 8.4140625 L 3 23 C 3 24.108 3.892 25 5 25 L 25 25 C 26.108 25 27 24.108 27 23 L 27 8.4140625 L 17.121094 18.292969 C 15.958108 19.455959 14.041892 19.455959 12.878906 18.292969 L 3 8.4140625 z " transform="translate(0,289.0625)" id="rect4592"/></g></svg></a>
<style>.abstractIconButtonParser {position:absolute;top:0.25rem; }.abstractIconButtonParser svg {fill: rgba(204,204,204,.8);width:1.875rem;height:1.875rem; padding: 0 7px;} .abstractIconButtonParser:hover svg{fill: #333;}</style><a href="/download.html" class="doNotPrint abstractIconButtonParser" style="position:relative;"><svg fill="#000000" xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve"><path d="M38.6,20.4c-1-6.5-6.7-11.5-13.5-11.5c-7.6,0-13.7,6.1-13.7,13.7c0,0.3,0,0.7,0.1,1c-5,0.4-8.9,4.6-8.9,9.6 c0,5.4,4.3,9.7,9.7,9.7h11.5c-0.8-0.8-8.1-8.1-8.1-8.1c-0.4-0.4-0.4-0.9,0-1.3l1.3-1.3c0.4-0.4,0.9-0.4,1.3,0l3.5,3.5 c0.4,0.4,1.1,0.1,1.1-0.4V21.8c0-0.4,0.5-0.9,1-0.9h1.9c0.5,0,0.9,0.4,0.9,0.9v13.4c0,0.6,0.8,0.8,1.1,0.4l3.5-3.5 c0.4-0.4,0.9-0.4,1.3,0l1.3,1.3c0.4,0.4,0.4,0.9,0,1.3L26,42.9h12.3v0c6.1-0.1,11-5.1,11-11.3C49.4,25.5,44.6,20.6,38.6,20.4z"/></svg><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools --></a>
<style>.abstractIconButtonParser {position:absolute;top:0.25rem; }.abstractIconButtonParser svg {fill: rgba(204,204,204,.8);width:1.875rem;height:1.875rem; padding: 0 7px;} .abstractIconButtonParser:hover svg{fill: #333;}</style><a href="https://github.com/breck7/breckyunits.com/blob/main/treenotationPaper.scroll" class="doNotPrint abstractIconButtonParser" style="position:relative;"><svg xmlns="http://www.w3.org/2000/svg" width="92pt" height="92pt" viewBox="0 0 92 92"><path d="M90.156 41.965 50.036 1.848a5.913 5.913 0 0 0-8.368 0l-8.332 8.332 10.566 10.566a7.03 7.03 0 0 1 7.23 1.684 7.043 7.043 0 0 1 1.673 7.277l10.183 10.184a7.026 7.026 0 0 1 7.278 1.672 7.04 7.04 0 0 1 0 9.957 7.045 7.045 0 0 1-9.961 0 7.038 7.038 0 0 1-1.532-7.66l-9.5-9.497V59.36a7.04 7.04 0 0 1 1.86 11.29 7.04 7.04 0 0 1-9.957 0 7.04 7.04 0 0 1 0-9.958 7.034 7.034 0 0 1 2.308-1.539V33.926a7.001 7.001 0 0 1-2.308-1.535 7.049 7.049 0 0 1-1.516-7.7L29.242 14.273 1.734 41.777a5.918 5.918 0 0 0 0 8.371L41.855 90.27a5.92 5.92 0 0 0 8.368 0l39.933-39.934a5.925 5.925 0 0 0 0-8.371"/></svg></a>
<div class="abstractTextLinkParser"><a href="https://scroll.pub">Built with Scroll v136.8.0</a></div>
</center>
</body>
</html>